## Part 1. Установка ОС
* Устаналиваем Ubuntu и проверяем версию командой `cat /etc/issue`

![part1.1](screens/1-1.png)

## Part 2. Создание пользователя

* Создаем пользователя командой `sudo adduser (username)`

![part2.1](screens/2-1.png)

* [Более подробная информация по утилите adduser](https://www.opennet.ru/man.shtml?topic=adduser&category=8&russian=0)
* Создаем друппу adm и обавляем права для пользователя с помощью команды: `sudo groupadd adm` и `sudo usermod -a -G adm bennario-2`

![part2.2](screens/2-2.png)
* Вывод команды `cat /etc/passwd`

![part2.3](screens/2-3.png)

## Part 3. Настройка сети ОС.
* 1. Задаём название машины:sudo

`sudo hostnamectl set-hostname gachi` 

![part3.1](screens/3-1.png)

* 2. Задаем время, на Московское. Для этого выбираем Европу, затем Россию, затем Москву и подтверждаем:

`tzselect` ;

![part3.2](screens/3-2.png)

![part3.3](screens/3-3.png)

![part3.4](screens/3-4.png)

Или можно выполнить эту команду: `sudo timedatectl set-timezone Europe/Moscow`

* 3. Выясняем внешний **ip-адрес** , **ip-адрес** устройства , внутренний **ip-адрес** шлюза(**gw**) , а также выводим названия сетевых интерфейсов.
* Адрес устройства:

   ` hostname -I ` 

![part3.5](screens/3-5.png)

* Внешний адрес:

  ` curl 2ip.ru ` 

![part3.6](screens/3-6.png)

* gw:

  `ip r | grep def | grep -Eo '[0-9.]*' | head -n 1`

![part3.7](screens/3-7.png)

* Названия сетевых интерфейсов:

  ` ifconfig `

![part3.8](screens/3-8.png)

* 4. Сетевые интерфейсы.

* **lo** - интерфейс обратной петли (loopback) позволяет компьютеру обращатся к самому себе. Интерфейс имеет ip-адрес 127.0.0.1 и может быть использован сетевым клиентским программным обеспечением, чтобы общаться с серверным приложением, расположенным на том же компьютере.
* **DHCP (Dynamic Host Configuration Protocol)** — протокол прикладного уровня модели TCP/IP, служит для автоматизации назначения IP-адреса клиенту. Сервер всегда слушает 67 порт, ожидает широковещательное сообщение от клиента, а после его получения отправляет ответное предложение — DHCPOFFER. Клиент принимает сообщение на 68 порту.

*  Задаем статичные настройки **ip, gw, dns** в файле конфигурации netplan:

* Сперва вводим команду:

  ` nano /etc/netplan/*.yaml `

* Откроется nano туда вставляем следующий текст для изменения сетевых конфигураций на нужные нам:

![part3.9](screens/3-9.png)

* Подтверждаем конфигурации:

  `sudo netplan try`

* Перезагружаем машину:

  `shutdown -r now`

* Пингуем `1.1.1.1` и `ya.ru`:

![part3.10](screens/3-10.png)

## Part 4. Обновление ОС.

* Начинаем процесс обновления командой `sudo apt-get update` для обновления информации о пакетах, далее `sudo apt-get dist-upgrade` для продвинутого механизма разрешения конфликтов;

![part4.1](screens/4-1.png)

![part4.2](screens/4-2.png)

## Part 5. Использование команды sudo.

* Команда **sudo** ( substitute user and do, подменить пользователя и выполнить ) позволяет строго определенным пользователям выполнять указанные программы с административными привилегиями без ввода пароля суперпользователя root.

* Пользователю **bennario-2**, выдадим привелегии: `sudo usermod -aG sudo bennario-2`;

* Вводим команду: `su - bennario-2`, чтобы перейти на учетную запись **bennario-2**;

![part5.1](screens/5-1.png)

* Так изначально поставилась **машина gachi**, сделаем перебежку названии хоста командой `sudo -u bennario-2 sudo hostnamectl set-hostname gachi`

![part5.2](screens/5-2.png)

## Part 6. Установка и настройка службы времени.

* Дату и время мы установили еще в **Part 2** , но давайте проверим правильность установленного времени с помощью команд:

`date;
timedatectl show;`

![part6.1](screens/6-1.png)

## Part 7. Установкаи и использование текстовых редакторов.

* Основная цель задания - Установить текстовые редакторы VIM (+ любые два по желанию NANO, MCEDIT, JOE и т.д.)
  Используя каждый из трех выбранных редакторов, создайте файл test_X.txt, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений.

* 1. NANO:
  * `nano test_nano.txt`;
  * Введите свой ник (**bennario**);
  * Нажмите **Cmd+O**, **Enter** для сохранения и **Cmd+X** для выхода;
  
  ![part7.1](screens/7-1.png)

  * Нажимте **Cmd+\\**, введите строку, которую необходимо искать (**bennario**) и нажмите клавишу **Enter**. Затем введите строку, на которую произвести замену (**21 School 21**) и нажмите **Enter**;
  
  ![part7.2](screens/7-2.png)

  * нажмите клавишу **A** для замены всех вхождений строки;
  
  ![part7.3](screens/7-3.png)

  * Нажмите **Cmd+X** для выхода;
  * Нажмите **N** для выхода без сохранения изменений;
  
  ![part7.4](screens/7-4.png)

* 2. Vim
  * `vim test_vim.txt`;
  * Введите свой ник (**bennario**). Для этого нужно перейти в режим редактирования путем нажания клавиши **i**;
  * Для выхода с сохранением нажмите **ESC** , затем введите **:wq**. Для подтверждения нажмите **Enter**;
  
  ![part7.5](screens/7-5.png)

  * Для замены (**bennario**) на (**21 School 21**) в **vim** -  **ESC** **:%s/слово/замена слово**;
  
  ![part7.6](screens/7-6.png)

  * Для выхода без сохранения нажимаем **ESC** , **SHIFT + вводим q!**. Для подтверждения нажмите **Enter**;
  
  ![part7.7](screens/7-7.png)

* 3. MCEDIT

  * Устанавливаем MCEDIT `sudo apt-get install mcedit`;

  * `mcedite test_mcedit.txt`;
  * Введите свй ник (**bennario**);
  * Для сохранения нажмите **F2(save)** , затем нажмите **F10exit** для выхода
  
  ![part7.8](screens/7-8.png)

  * Меняем (**bennario**) на (**21 School 21**);
  
  ![part7.9](screens/7-9.png)

  ![part7.10](screens/7-10.png)

  * Для выхода без сохранения нажмите **F10** , затем перевидите указатель на **NO**. Для подтверждения нажмите **Enter**;
  
  ![part7.11](screens/7-11.png)
  
## Part 8. Установка и базовая настройка сервиса SSHD.
* Устанавливаем и настраиваем SSH-сервер с помощью команд:

      sudo apt-get update &&
      sudo apt-get install openssh-server net-tools && 
      sudo systemctl enable ssh &&  # добавляем сервер в автозапуск
      sudo sed -i '/Port/c\Port 2022' /etc/ssh/sshd_config &&  # изменяем порт
      sudo systemctl restart sshd;
      clear;
      ps -C sshd;
      netstat -tan;

  ![part8.1](screens/8-1.png)

* Опции утилиты **ps**:
  * -A, -e - выбрать все процессы;
  * -a - выбрать все процессы, кроме фоновых;
  * -d - выбрать все процессы, даже фоновые, кроме процессов сессий;
  * -N - выбрать все процессы кроме указанных;
  * -С - выбирать процессы по имени команды;
  * -G - выбрать процессы по ID группы;
  * -p - выбрать процессы PID;
  * --ppid - выбрать процессы по PID родительского процесса;
  * -s - выбрать процессы по ID сессии;
  * -t - выбрать процессы по tty;
  * -u - выбрать процессы пользователя;
  * -x - найти все вхождения строки поиска.
  * Опции форматирования:
    * -с - отображать информацию планировщика;
    * -f - вывести максимум доступных данных, например, количество потоков;
    * -F - аналогично -f, только выводит ещё больше данных;
    * -l - длинный формат вывода;
    * -j - вывести процессы в стиле Jobs, минимум информации;
    * -M - добавить информацию о безопасности;
    * -o - позволяет определить свой формат вывода;
    * --sort - выполнять сортировку по указанной колонке;
    * -L - отображать потоки процессов в колонках LWP и NLWP;
    * -m - вывести потоки после процесса;
    * -V - вывести информацию о версии;
    * -H - отображать дерево процессов.

* Опции утилиты **netstat**:
  * -n - Отображение адресов и номеров портов в числовом формате.
  * -a - Отображение всех подключений и ожидающих портов.
  * -t - Отображение текущего подключения в состоянии переноса нагрузки с процессора на сетевой адаптер при передаче данных.

## Part 9. Установка и использование утилит top, htop.
  * По выводу команды top определить и написать в отчёте:

  * uptime:

  ![part9.1](screens/9-1.png)

  * количество авторизованных пользователей:

  ![part9.2](screens/9-2.png)

  * Общая загрузка системы:

  ![part9.3](screens/9-3.png)

  * общее количество процессов:

  ![part9.4](screens/9-4.png)

 * загрузка cpu:
 
  ![part9.5](screens/9-5.png)

  * Загрузка памяти:

  ![part9.6](screens/9-6.png)

  * Pid процесса занимающего больше всего памяти:

  ![part9.7](screens/9-7.png)

  * Pid процесса, занимающего больше всего процессорного времени:

  ![part9.8](screens/9-8.png)

* Вывод htop по отсортированным **PID**,**PERCENT_CPU**,**PERCENT_MEM**, **TIME** .
* Сортируем с помощью команды ` htop -s " "`.

* PID:

  ![part9.9](screens/9-9.png)

* PERCENT_CPU:

  ![part9.10](screens/9-10.png)

* PERCENT_MEM:

  ![part9.11](screens/9-11.png)

* TIME:

  ![part9.12](screens/9-12.png)

* Отфильтрованному для процесса sshd:
  Нажмите **F4** - для того, чтобы на шаг стать ближе к завершению нужного действия, после запуска **htop**.

  ![part9.13](screens/9-13.png)

* С процессом syslog, найденным, используя поиск:
  Нажмите **F3** - для того, чтобы на шаг стать ближе к завершению нужного действия, после запуска **htop**.

  ![part9.14](screens/9-14.png)

* С добавленным выводом hostname, clock и uptime:
  Нажмите **F2** - для того, чтобы на шаг стать ближе к завершению нужного действия, после запуска **htop**.
  
  ![part9.15](screens/9-15.png)

## Part 10. Использование утилиты fdisk.

* Запустить команду `sudo fdisk -l`.

**В отчёте написать название жесткого диска, его размер и количество секторов, а также размер swap.**

* Полное название жесткого диска:

  * Общее название: **Disk /dev/sda**
  * Disk model: **VBOX HARDDISK**
  * Disk identifier: **AE794673-E7C6-4E52-876D-02EA22748B69** ;

* Размер жесткого диска: **25GB**;
* количество секторов: **52428800 sectors**;
* размер swap **2.0 GB**
* Размер swap так же можно узнать с помощью `free -h`

  ![part10.1](screens/10-1.png)

  ![part10.2](screens/10-2.png)

## Part 11. Использование утилиты df.

**Запускаем команду df**.
    Прописываем ` /` через пробел, для того, чтобы попасть в корневой раздел;
* размер раздела: **11758760 KB**;
* размер занятого пространства: **4901996 KB**;
* размер свободного пространства: **6237656 KB**;
* процент использования: **45%**;

  ![part11.1](screens/11-1.png)

**Запустить команду df -Th**.
Прописываем ` /` через пробел, для того, чтобы попасть в корневой раздел;

* размер раздела: **12 G**;
* размер занятого пространства: **4,7 G**;
* размер свободного пространства: **6.0 G**;
* процент использования: **45%**;
* тип файловой системы: **ext4**;

  ![part11.2](screens/11-2.png)

## Part 12. Использование утилиты du.


* Нужно вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде) с помощью **du**;

* Для этого вводим команду `sudo du -hs -B KB /"путь к папке"`;

* /home:
* /var:
* /var/log:

  ![part12.2](screens/12-2.png)

* Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *):

  ![part12.1](screens/12-1.png)

## Part 13. Установка и использование утилиты ncdu.

* Установить утилиту ncdu. `sudo apt install ncdu`.
* Вывести размер папок /home, /var, /var/log.

* /home:

![part13.1](screens/13-1.png)

* /var:

![part13.2](screens/13-2.png)

* /var/log:

![part13.3](screens/13-3.png)

## Part 14. Работа с системными журналами.

* Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему.

* Устанавливаем **lnav** c помощью команды `sudo apt-get install lnav -y` .

* Проверяем последний вход командой `last -1`.

![part14.1](screens/14-1.png)

* С помощью команды **lnav** смотрим следующие логи:

* 1. /var/log/dmesg:

     ![part14.2](screens/14-2.png)

* 2. /var/log/syslog:

     ![part14.3](screens/14-3.png)

* 3. /var/log/auth.log:

      ![part14.4](screens/14-4.png)

Открыв **/var/log/auth.log** становится ясно, что последняя успешная авторизация - bennario в 16:15:48.

* Перезапустить службу SSHd.
  `sudo systemctl restart ssh`;

![part14.5](screens/14-5.png)

## Part 15. Использование планировщика заданий CRON.

* Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.
* Вводим команду `crontab -e`
  Затем задаем **uptime** каждые 2 минуты:

  ![part15.1](screens/15-1.png)

* Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении:

  ![part15.2](screens/15-2.png)

* Для вывода списка текущих заданий **CRON** используем команду `crontab -l`:

  ![part15.3](screens/15-3.png)

* Удалите все задания из планировщика заданий командой `crontab -r` и проверим с помощью `crontab -l`:

  ![part15.4](screens/15-4.png)